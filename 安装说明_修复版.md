# 🔧 修复安装问题

## 问题原因

`better-sqlite3` 需要编译原生模块，需要 Visual Studio Build Tools。

## ✅ 解决方案

我已经将 `better-sqlite3` 替换为 `sql.js`（纯 JavaScript 实现，无需编译）。

## 📝 安装步骤

### 1. 清理旧的 node_modules（如果存在）

```powershell
cd backend
# 如果 node_modules 存在，删除它
Remove-Item -Recurse -Force node_modules -ErrorAction SilentlyContinue
```

### 2. 重新安装依赖

```powershell
npm install
```

这次应该可以成功安装了！因为 `sql.js` 是纯 JavaScript，不需要编译。

### 3. 启动服务器

```powershell
npm start
```

## 🎯 已完成的修改

1. ✅ 替换 `better-sqlite3` → `sql.js`
2. ✅ 创建兼容层，使现有代码无需修改
3. ✅ 修复 SQL 语法（GROUP_CONCAT → group_concat）
4. ✅ 更新数据库初始化为异步

## 📦 新的依赖

- `sql.js` - 纯 JavaScript SQLite 实现，无需编译
- 其他依赖保持不变

## ⚠️ 注意事项

- `sql.js` 性能略低于 `better-sqlite3`，但对于小型应用完全足够
- 数据库文件会自动保存到 `backend/database.db`
- 所有功能保持不变

## 🚀 现在可以开始使用了！

安装完成后，按照 `快速开始.md` 的步骤操作即可。

